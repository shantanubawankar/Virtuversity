<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtuversity</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              glass: 'rgba(255,255,255,0.08)'
            },
            backdropBlur: {
              xs: '2px'
            }
          }
        }
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      html, body { height: 100%; }
      body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; }
      .glass { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.18); box-shadow: 0 8px 32px rgba(31,38,135,0.15); backdrop-filter: blur(10px); }
    </style>
  </head>
  <body class="min-h-screen bg-gradient-to-br from-[#0f172a] via-[#111827] to-[#1f2937] text-white">
    <div id="root"></div>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script type="module">
      const { useState, useEffect } = React
      function Button({ children, onClick, variant = 'primary' }) {
        const base = 'px-4 py-2 rounded-lg font-medium transition'
        const variants = {
          primary: 'bg-white/10 hover:bg-white/20 text-white border border-white/20',
          accent: 'bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 hover:opacity-90 text-white'
        }
        return React.createElement('button', { onClick, className: base + ' ' + variants[variant] }, children)
      }
      function Card({ children, className = '' }) {
        return React.createElement('div', { className: 'glass rounded-2xl p-6 ' + className }, children)
      }
      function Navbar({ role, setRole }) {
        return React.createElement('nav', { className: 'flex items-center justify-between p-4' },
          React.createElement('div', { className: 'flex items-center gap-3' },
            React.createElement('div', { className: 'w-9 h-9 rounded-xl bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500' }),
            React.createElement('span', { className: 'text-xl font-semibold' }, 'Virtuversity')
          ),
          React.createElement('div', { className: 'flex items-center gap-2' },
            React.createElement(Button, { onClick: () => setRole('student') }, 'Student'),
            React.createElement(Button, { onClick: () => setRole('teacher') }, 'Teacher'),
            React.createElement('a', { href: '#auth', className: 'ml-2 text-sm text-white/80 hover:text-white' }, 'Sign In')
          )
        )
      }
      function Hero() {
        return React.createElement('section', { className: 'px-6 py-16 text-center' },
          React.createElement('h1', { className: 'text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400' }, 'Micro‑learning for modern students'),
          React.createElement('p', { className: 'mt-4 text-white/80 max-w-2xl mx-auto' }, 'Pay per video, subscribe per course, or follow a teacher. Learn exactly what you need.'),
          React.createElement('div', { className: 'mt-8 flex justify-center gap-4' },
            React.createElement(Button, { variant: 'accent' }, 'Browse Content'),
            React.createElement(Button, null, 'Become a Teacher')
          )
        )
      }
      function PricingSelector({ onSelect }) {
        return React.createElement('div', { className: 'grid md:grid-cols-3 gap-6' },
          React.createElement(Card, null,
            React.createElement('h3', { className: 'text-lg font-semibold' }, 'Per Video'),
            React.createElement('p', { className: 'text-white/70 mt-2' }, 'One-off purchase per video.'),
            React.createElement(Button, { onClick: () => onSelect('video') }, 'Choose')
          ),
          React.createElement(Card, null,
            React.createElement('h3', { className: 'text-lg font-semibold' }, 'Course Bundle'),
            React.createElement('p', { className: 'text-white/70 mt-2' }, 'Access all videos of a course.'),
            React.createElement(Button, { onClick: () => onSelect('course') }, 'Choose')
          ),
          React.createElement(Card, null,
            React.createElement('h3', { className: 'text-lg font-semibold' }, 'Teacher Subscription'),
            React.createElement('p', { className: 'text-white/70 mt-2' }, 'Subscribe to all content by a teacher.'),
            React.createElement(Button, { onClick: () => onSelect('subscription') }, 'Choose')
          )
        )
      }
      function Auth() {
        const [mode, setMode] = useState('login')
        const [email, setEmail] = useState('')
        const [password, setPassword] = useState('')
        const [role, setRole] = useState('student')
        const submit = async () => {
          const res = await fetch('/api/auth/' + (mode === 'login' ? 'login' : 'register'), {
            method: 'POST', headers: { 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify({ email, password, role })
          })
          const data = await res.json()
          alert(data.message || JSON.stringify(data))
        }
        return React.createElement(Card, { className: 'max-w-md mx-auto' },
          React.createElement('div', { className: 'flex gap-2 mb-4' },
            React.createElement(Button, { onClick: () => setMode('login') }, 'Login'),
            React.createElement(Button, { onClick: () => setMode('register') }, 'Register')
          ),
          React.createElement('div', { className: 'grid gap-3' },
            React.createElement('input', { className: 'glass rounded-lg px-4 py-2', placeholder: 'Email', value: email, onChange: e => setEmail(e.target.value) }),
            React.createElement('input', { type: 'password', className: 'glass rounded-lg px-4 py-2', placeholder: 'Password', value: password, onChange: e => setPassword(e.target.value) }),
            React.createElement('select', { className: 'glass rounded-lg px-4 py-2', value: role, onChange: e => setRole(e.target.value) },
              React.createElement('option', { value: 'student' }, 'Student'),
              React.createElement('option', { value: 'teacher' }, 'Teacher')
            ),
            React.createElement(Button, { variant: 'accent', onClick: submit }, mode === 'login' ? 'Login' : 'Register')
          )
        )
      }
      function VideoPlayer({ src }) {
        return React.createElement(Card, null,
          React.createElement('video', { src, controls: true, className: 'w-full rounded-xl' })
        )
      }
      async function pay(amount) {
        const keyRes = await fetch('/api/payments/key')
        const { key } = await keyRes.json()
        const orderRes = await fetch('/api/payments/create-order', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ amount }) })
        const { order } = await orderRes.json()
        const rzp = new window.Razorpay({ key, order_id: order.id, name: 'Virtuversity', theme: { color: '#7c3aed' } })
        rzp.open()
      }
      function App() {
        const [role, setRole] = useState('student')
        const [pricing, setPricing] = useState(null)
        return React.createElement('div', null,
          React.createElement(Navbar, { role, setRole }),
          React.createElement(Hero),
          React.createElement('section', { className: 'px-6 pb-10 max-w-5xl mx-auto' },
            React.createElement('h2', { className: 'text-2xl font-semibold mb-4' }, 'Flexible pricing'),
            React.createElement(PricingSelector, { onSelect: setPricing }),
            pricing && React.createElement('div', { className: 'mt-4 flex items-center gap-3' },
              React.createElement('p', { className: 'text-white/80' }, 'Selected: ' + pricing),
              React.createElement(Button, { variant: 'accent', onClick: () => pay(49900) }, 'Pay ₹499')
            )
          ),
          React.createElement('section', { id: 'auth', className: 'px-6 pb-16 max-w-5xl mx-auto' },
            React.createElement('h2', { className: 'text-2xl font-semibold mb-4' }, 'Account'),
            React.createElement(Auth)
          ),
          React.createElement('section', { className: 'px-6 pb-24 max-w-5xl mx-auto' },
            React.createElement('h2', { className: 'text-2xl font-semibold mb-4' }, 'Sample video'),
            React.createElement(VideoPlayer, { src: '/api/videos/stream/sample' })
          )
        )
      }
      ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App))
    </script>
  </body>
  </html>
